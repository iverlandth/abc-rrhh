<div class="row">
  <main class="col-sm-7 col-md-8 pt-3">
    <h2>
      Employees
      <span class="float-right">
        <button class="btn btn-success btn-sm" (click)="new()">New Employee</button>
      </span>
    </h2>
    <div class="table-responsive">
      <table class="table table-striped">
        <thead>
        <tr>
          <th>#</th>
          <th>Name</th>
          <th>Role</th>
          <th class="text-center">Options</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let _employee of employees" (click)="show(_employee)"
            [class.table-success]="employee === _employee">
          <td>{{_employee.id}}</td>
          <td>{{_employee.first_name}} {{_employee.middle_name}} {{_employee.last_name}}</td>
          <td>{{_employee.role}}</td>
          <td class="text-center">
            <button class="btn btn-danger btn-sm delete" (click)="delete(_employee); $event.stopPropagation()" data-toggle="tooltip"  title="Delete">x</button>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </main>
  <nav class="col-sm-5 offset-sm-7  col-md-4 offset-md-8 hidden-xs-down bg-faded sidebar">
    <div class="row">
      <div class="col-md-12">
        <button class="btn btn-outline-success btn-sm float-right" [class.hidden]="!isEditEmployee" (click)="update()">Save</button>

        <form *ngIf="(employee && !employee.id || isEditEmployee)" (ngSubmit)="save()" #employeeForm="ngForm">
          <h2 class="second-container">Add Employee</h2>
          <div class="form-group" [class.has-danger]="!(employeeFirstName.valid || employeeFirstName.pristine)">
            <label class="form-control-label">First Name</label>
            <input class="form-control" id="first_name" required [(ngModel)]="employee.first_name"
                   name="first_name" #employeeFirstName="ngModel" placeholder="Enter First Name">
            <div [hidden]="employeeFirstName.valid || employeeFirstName.pristine" class="form-control-feedback">
              First Name is required
            </div>
          </div>
          <div class="form-group" [class.has-danger]="!(employeeMiddleName.valid || employeeMiddleName.pristine)">
            <label class="form-control-label">Middle Name</label>
            <input class="form-control" id="middle_name" required [(ngModel)]="employee.middle_name"
                   name="middle_name" #employeeMiddleName="ngModel"  placeholder="Enter Middle Name" />
            <div [hidden]="employeeMiddleName.valid || employeeMiddleName.pristine" class="form-control-feedback">
              Middle Name is required
            </div>
          </div>
          <div class="form-group" [class.has-danger]="!(employeeLastName.valid || employeeLastName.pristine)">
            <label class="form-control-label">Last Name</label>
            <input class="form-control" id="last_name" required [(ngModel)]="employee.last_name"
                   name="last_name" #employeeLastName="ngModel" placeholder="Enter Last Name" />
            <div [hidden]="employeeLastName.valid || employeeLastName.pristine" class="form-control-feedback">
              Last Name is required
            </div>
          </div>
          <div class="form-group" [class.has-danger]="!(employeeRole.valid || employeeRole.pristine)">
            <label class="form-control-label">Role</label>
            <select class="form-control" id="role" required [(ngModel)]="employee.role" name="role"
                    #employeeRole="ngModel">
              <option *ngFor="let role of roles" [value]="role">{{role}}</option>
            </select>
            <div [hidden]="employeeRole.valid || employeeRole.pristine" class="form-control-feedback">
              Role is required
            </div>
          </div>
          <div class="text-right" [class.hidden]="employee && employee.id" >
            <button type="submit" class="btn btn-success" [disabled]="!employeeForm.form.valid">Submit</button>
          </div>
        </form>

        <div *ngIf="employee && employee.id && !isEditEmployee">
          <h2 class="second-container">{{employee.first_name}} details!
            <button class="btn btn-outline-warning btn-sm float-right" [class.hidden]="isEditEmployee"  (click)="edit()">Edit</button>
          </h2>
          <div class="form-group">
            <label>id: </label>
            <strong>
              {{employee.id}}
            </strong>
          </div>
          <div class="form-group">
            <label>First Name: </label>
            <strong [class.hidden]="isEditEmployee">{{employee.first_name}}</strong>
          </div>
          <div class="form-group">
            <label>Middle Name: </label>
            <strong [class.hidden]="isEditEmployee">{{employee.middle_name}}</strong>
          </div>
          <div class="form-group">
            <label>Last Name: </label>
            <strong [class.hidden]="isEditEmployee">{{employee.last_name}}</strong>
          </div>
          <div class="form-group">
            <label>Role</label>
            <strong [class.hidden]="isEditEmployee">{{employee.role}}</strong>
          </div>
        </div>
      </div>
    </div>
  </nav>
</div>
